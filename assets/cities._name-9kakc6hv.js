import{j as s,L as j,R as p,c as g,r as m,S as d,u,s as N,a as v,g as S,b as C}from"./index-C4Z9ujl3.js";import{H as f,a as y}from"./header-D2A6Tlr7.js";import{c as r,C as b,S as M}from"./spinner-M-TBxhlO.js";import{M as L}from"./Map-suWxh-YK.js";const w=({children:e})=>s.jsxs("div",{className:"page page--gray page--main",children:[s.jsx(f,{}),e]}),O=({name:e,isActive:a=!1})=>s.jsx("li",{className:"locations__item",children:s.jsx(j,{to:"/cities/$name",params:{name:e.toLowerCase()},className:r("locations__item-link tabs__item",a&&" tabs__item--active"),children:s.jsx("span",{children:e})})}),k=()=>{const{name:e}=p.useParams();return s.jsx("ul",{className:"locations__list tabs__list",children:g.map(a=>s.jsx(O,{name:a,isActive:a.toLowerCase()===e},a))})},A=()=>{const e=p.useParams().name;return s.jsxs(s.Fragment,{children:[s.jsx("section",{className:"cities__no-places",children:s.jsxs("div",{className:"cities__status-wrapper tabs__content",children:[s.jsx("b",{className:"cities__status",children:"No places to stay available"}),s.jsxs("p",{className:"cities__status-description",children:["We could not find any property available at the moment in"," ",s.jsx("span",{style:{textTransform:"capitalize"},children:e})]})]})}),s.jsx("div",{className:"cities__right-section"})]})},F=({currentSorting:e,onChange:a})=>{const[n,t]=m.useState(!1),i=Object.entries(d);return s.jsxs("form",{className:"places__sorting",action:"#",method:"get",children:[s.jsx("span",{className:"places__sorting-caption",children:"Sort byÂ "}),s.jsxs("span",{className:"places__sorting-type",tabIndex:0,onClick:()=>t(!n),"data-testid":"sorting-type",children:[d[e],s.jsx("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:s.jsx("use",{xlinkHref:"#icon-arrow-select"})})]}),s.jsx("ul",{"data-testid":"sorting-list",className:["places__options places__options--custom ",n?"places__options--opened":""].join(" "),children:i.map(([c,l])=>s.jsx("li",{className:`places__option ${e===c?" places__option--active":" "}`,tabIndex:0,"data-testid":`sorting-option-${c}`,onClick:()=>{a(c),t(!1)},children:l},c))})]})},P=({activeSorting:e,offers:a,activeCity:n})=>{const t=u(),[i,c]=m.useState(null),l=o=>{c(o)},_=()=>{c(null)},x=o=>{t(N(o))};return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"cities__places places",children:[s.jsx("h2",{className:"visually-hidden",children:"Places"}),s.jsxs("b",{className:"places__found",children:[a.length," places to stay in ",n.name]}),s.jsx(F,{currentSorting:e,onChange:x}),s.jsx("div",{className:"cities__places-list places__list tabs__content",children:a.map(o=>s.jsx(b,{offer:o,onMouseMove:l,onMouseLeave:_},o.id.toString()))})]}),s.jsx("div",{className:"cities__right-section",children:s.jsx(L,{locations:a.map(({id:o,location:h})=>({id:o,...h})),city:n,activeOffer:i})})]})},E=()=>{const e=v(S),{name:a}=p.useParams(),{data:n,isLoading:t}=y(),i=n==null?void 0:n.filter(c=>c.city.name.toLowerCase()===a).sort(C[e]);return s.jsxs("main",{className:r("page__main page__main--index",!t&&!i&&"page__main--index-empty"),children:[s.jsx("h1",{className:"visually-hidden",children:"Cities"}),s.jsx("div",{className:"tabs",children:s.jsx("section",{className:"locations container",children:s.jsx(k,{})})}),s.jsx("div",{className:"cities",children:s.jsxs("div",{className:r("cities__places-container container",!t&&!i&&"cities__places-container--empty"),children:[t&&s.jsx(M,{}),!t&&!i&&s.jsx(A,{}),!t&&i&&s.jsx(P,{activeSorting:e,offers:i,activeCity:i[0].city})]})})]})},H=()=>s.jsx(w,{children:s.jsx(E,{})}),z=H;export{z as component};
